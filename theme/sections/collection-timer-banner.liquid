<div class="timer_banner_inner" id="timer_banner_inner" >
    {% if section.settings.text !="" %} 
    <div class="title">
      <p id="title" style="color:{{ section.settings.text_color }}">{{section.settings.text }}  </p>
    </div>  
     {% endif %}
   
   {%  if section.settings.short_description %}
   <div class="short_description">
    {{  section.settings.short_description }}
   </div>
   {% endif %}
   <div class="timer_wrap">
    <div style="color:{{ section.settings.text_color }}" class="time" id="timer_wrapper">
      <span id="days"> </span> :
       <span id="hrs"> </span> :
       <span id="min"> </span> :
       <span id="sec"> </span>
    </div>
    <div class="text_wrap">
    <span>Days</span>
    <span>Hours</span>
    <span>Mins</span>
    <span>Secs</span>
   </div>
</div>
 </div>
 {% comment %} {%  if collection.metafields.custom.show_timer == true  %}        
{% endif %}  {% endcomment %}
 
 
 {% schema %}
 {
     "name":"Timer Banner",
     "tag" :"section",
     "class":"timer_banner_wrapper",
     "settings":[                  
         {
             "type": "text",
             "id": "text",
             "label": "Banner Text",
             "default": "Text"
           },
           {
            "type": "richtext",
            "id": "short_description",
            "label": "Short Description"
          },   
          {
            "type": "color",
            "id": "background",
            "label": "Background",
            "default": "#000000"
          },
           {
            "type": "image_picker",
            "id": "background_image",
            "label": "Background Image"
          },          
           {
             "type": "color",
             "id": "text_color",
             "label": "Text Color",
             "default": "#fff"
           },
           {
            "type":"text",
            "id":"countdown_timer_start_date",
            "label":"Sale Start Date",
            "info":"Date time will be GMT",
            "default":"march 08, 2024 18:30:00"
         },  
        {
            "type":"text",
            "id":"countdown_timer_date",
            "label":"Sale end Date",
            "info":"Date time will be GMT",
            "default":"march 08, 2024 18:30:00"
         }          
     ],
     "presets" :[
         {
         "name":"Timer Banner"
         }
     ]
 
 
 
 }
 {% endschema %}
 
 <style>
.timer_banner_wrapper {
 /*   background-image:url({{ section.settings.background_image | img_url: 'master' }});*/
    background-image:linear-gradient(150deg, #ecedee, transparent 30%), linear-gradient(330deg, rgb(49 29 207), transparent 30%), linear-gradient(225deg, #d0b65e, #b2426a, #d0b65e, rgb(49 29 207));
    margin:1em 0;
    color:{{ section.settings.text_color }};
    background-color: {{  section.settings.background }};
    background-repeat: no-repeat;
    background-size: cover;
}

.timer_banner_wrapper .timer_banner_inner >.time span#hrs {
   border-radius: 32px 8px 8px 32px;
}

.timer_banner_wrapper .timer_banner_inner >.time span#sec {
   border-radius: 8px 32px 32px 8px;
}
.timer_banner_wrapper .timer_banner_inner {
   display: none;
   flex-direction: row;
   gap: 1em;
   justify-content: space-around;
   align-items: center;
   padding: 0.5em 2em;
 font-weight: bold;
}
.text_wrap {
   display: flex;
   justify-content: space-between;
   align-items: center;
   gap: 3.5em;
   min-width: 320px;
   width: auto;
}

.text_wrap >span {
   font-size: 14px;
   line-height: normal;
   text-transform: uppercase;
   font-weight: 600;
   width: 100%;
   text-align: center;
}
.timer_banner_wrapper .timer_banner_inner p {
   margin: 0;
   font-size: 25px;
   font-weight: bold;
}


.timer_banner_wrapper .timer_banner_inner >.time span {
   font-size: 20px;
   font-weight: 500;
   border: 1px solid #000;
   padding: 10px 20px;
   width: 100%;
   text-align: center;
}
   
{% comment %} new style css {% endcomment %}
.timer_banner_wrapper .timer_banner_inner .title >p {
    font-size: 40px;
}

.timer_banner_wrapper .timer_banner_inner .short_description >p {
    font-size: 20px;
    font-weight: 400;
}

.timer_wrap .time >span {
    background: rgb(255 255 255 / 40%);
    backdrop-filter: saturate(180%) blur(10px);
    color: {{ section.settings.text_color }};
    padding: 0.9em;
    border-radius: 6px;
    font-size:25px;
    line-height:normal;
}
.timer_wrap {
    display: flex;
    flex-direction: column;
    gap: 0;
    align-items: center;
}
.timer_wrap .time {
    display: flex;
    align-items: center;
    gap: 10px;
}

@media (max-width:991px){
    .timer_banner_wrapper .timer_banner_inner .title >p {
        font-size: 30px;
    }
    
    .timer_banner_wrapper .timer_banner_inner .short_description >p {
        font-size: 17px;
    }
    
    .timer_wrap .time >span {
        padding: 0.8em;
    }
}
@media (max-width:767px){
    .timer_wrap {
        gap: 0.4em;
    }
    .timer_banner_wrapper .timer_banner_inner {
        padding: 0.5em;
        gap: 0.5em;
    }
    .timer_banner_wrapper .timer_banner_inner .title >p {
        font-size: 20px;
        line-height: normal;
    }
    
    .timer_banner_wrapper .timer_banner_inner .short_description >p {
        font-size: 16px;
        display: none;
    }
    
    .text_wrap >span {
        font-size: 10px;
    }
    
    .text_wrap {
        gap: 0.9em;
        min-width: inherit;
    }
    
    .timer_wrap .time >span {
        padding: 0.5em;
        font-size:14px;
    }
     .timer_banner_wrapper .timer_banner_inner p {
   font-size: 18px;
    }
    .timer_wrap .time {
        gap: 5px;
    }
     
   }
 </style>
 
 <script type="text/javascript">
 
 
  var countdown_timer_date = '{{section.settings.countdown_timer_date}}';
   countdown_timer_date += " GMT";
 
   // Set the date we're counting down to
   var countDownDate = new Date(countdown_timer_date).getTime();
 
   
   //timer start Time
   var countdown_timer_start_date = '{{section.settings.countdown_timer_start_date}}';
   countdown_timer_start_date += " GMT";
 
   // Set the date we're counting down to
   var countDownStartDate = new Date(countdown_timer_start_date).getTime();
   

 // Update the count down every 1 second
 var x = setInterval(function() {
    var currentTime = new Date().getTime();

    // console.log("currentTime-",currentTime,"countDownStartDate-",countDownStartDate);
 
    if(currentTime>=countDownStartDate){
     document.getElementById("timer_banner_inner").style.display = "flex";
 }
 
   // Get today's date and time
   var now = new Date().getTime();
   
   // Find the distance between now and the count down date
 var distance = countDownDate - now;
 
   // Time calculations for days, hours, minutes and seconds
   var days = Math.floor(distance / (1000 * 60 * 60 * 24));
   days = ("0" + days).slice(-2);
   var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    hours = ("0" + hours).slice(-2);
   var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    minutes = ("0" + minutes).slice(-2);
   var seconds = Math.floor((distance % (1000 * 60)) / 1000);
    seconds = ("0" + seconds).slice(-2);
 
    // Display the result in the element with id="timer_wrapper"
    document.getElementById("days").innerHTML = days  ;
    document.getElementById("hrs").innerHTML = hours ;
    document.getElementById("min").innerHTML = minutes ;
   document.getElementById("sec").innerHTML = seconds ;
 
   // If the count down is finished, write some text
   if (distance < 0) {
     clearInterval(x);
     // document.getElementById("timer_wrapper").innerHTML = "EXPIRED";
      // Display the result in the element with id="timer_wrapper"
    document.getElementById("days").innerHTML = "00"  ;
    document.getElementById("hrs").innerHTML = "00" ;
    document.getElementById("min").innerHTML = "00" ;
   document.getElementById("sec").innerHTML = "00" ;
      document.getElementById("title").innerHTML = "SALE ENDED.....";
   }
 }, 1000);
 
 
 
 
 </script>